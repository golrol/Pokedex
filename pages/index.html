<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- External css and js files -->
    <link rel="stylesheet" type="text/css" href="static/styles/index_style.css">
    <script src="static/scripts/helperFuncs.js"></script>
    <title>Home page</title>
</head>

<body>
    <ul class="list-group list-group-horizontal">
        <a class="navbar-brand ml-3 mt-1" href="/">
            <img src="/static/icon.jpg" width="30" height="30" class="d-inline-block align-top" alt="">Pok&#233;dex
        </a>
        <li class="list-group nav-item mt-1">
            <a class="nav-link" href="/pokemons">All Pok&#233;mons</a>
        </li>
        <li class="list-group nav-item mt-1">
            <a class="nav-link" href="#mostViewed">Most viewed Pok&#233;mons</a>
        </li>
    </ul>

    <div class="container">
        <div class="row">
            <div class="col-2"></div>
            <div class="col-8 text-center mt-5">
                <h1>Welcome to Pok&#233;dex</h1>
            </div>
            <div class="col-2"></div>
        </div>

        <div class="row">
            <div class="col-2"></div>
            <div class="col-8 mt-2">
                <p>
                    Every Pokémon creature has an array of stats. HP (Hit Points) is a Pokémon's life force. If your Pokémon's HP hits zero, it faints and is no longer usable in battle (it can still use Hidden Machines, though). The Speed stat decides which Pokémon will
                    make the first move in battle. This stat can be critical in long battles. Attack and Special Attack measure the strength of moves used by your Pokémon; the higher this is, the more damage you will do to opponents. Attack corresponds
                    to moves in the Physical category, while Special Attack corresponds to Special moves. Similarly, Defense and Special Defense measure the ability to take attacks from other Pokémon; the higher the stat is, the fewer Hit Points will
                    be lost when attacked. Defense corresponds to moves in the Physical category, while Special Defense corresponds to Special moves.
                </p>
            </div>
            <div class="col-2"></div>
        </div>

        <div class="row">
            <div class="col-2"></div>
            <div class="col-8 text-center mt-5">
                <a href="/pokemons" class="btn btn-secondary">View all Pok&#233;mons</a>
            </div>
            <div class="col-2"></div>
        </div>

        <!-- Template table of top 3 pokemons(updated in script). -->
        <div class="row">
            <div class="col-2"></div>
            <div class="col-8 text-center mt-5">
                <table id="mostViewed" class="table table-borderless">
                    <caption>
                        Most viewed Pok&#233;mons
                    </caption>
                    <tr>
                        <td class="w-25">
                            <a href="" id="firstImgLink">
                                <img id="firstMaxPopImg" src="" class="img-fluid" alt="">
                            </a>
                        </td>
                        <td>
                            <a href="" id="firstMaxPop"></a>
                        </td>
                    </tr>
                    <tr>
                        <td class="w-25">
                            <a href="" id="secondImgLink">
                                <img id="secondMaxPopImg" src="" class="img-fluid" alt="">
                            </a>
                        </td>
                        <td>
                            <a href="" id="secondMaxPop"></a>
                        </td>
                    </tr>
                    <tr>
                        <td class="w-25">
                            <a href="" id="thirdImgLink">
                                <img id="thirdMaxPopImg" src="" class="img-fluid" alt="">
                            </a>
                        </td>
                        <td>
                            <a href="" id="thirdMaxPop"></a>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="col-2"></div>
        </div>

    </div>

    <script>
        function updateMax3(elem) { //Function to update the top 3 pokemons.
            if (elem.max1.popularity != 0) {
                //Update Pokemon's name (as a link).
                document.getElementById("firstMaxPop").innerHTML = '<h3>' + elem.max1.pokemon.name + '</h3>';
                document.getElementById("firstMaxPop").href = 'pokemons/' + elem.max1.pokemon.id;

                //Update pokemon's img (as a link).
                var idPath = getFullId(elem.max1.pokemon.id); //Add leading zeroes to ID.
                document.getElementById("firstMaxPopImg").src = 'static/pokemon-data/images/' + idPath + '.png';
                document.getElementById("firstImgLink").href = 'pokemons/' + elem.max1.pokemon.id;

                if (elem.max2.popularity != 0) {
                    document.getElementById("secondMaxPop").innerHTML = '<h3>' + elem.max2.pokemon.name + '</h3>';
                    document.getElementById("secondMaxPop").href = 'pokemons/' + elem.max2.pokemon.id;
                    var idPath = getFullId(elem.max2.pokemon.id);
                    document.getElementById("secondMaxPopImg").src = 'static/pokemon-data/images/' + idPath + '.png';
                    document.getElementById("secondImgLink").href = 'pokemons/' + elem.max2.pokemon.id;

                    if (elem.max3.popularity != 0) {
                        document.getElementById("thirdMaxPop").innerHTML = '<h3>' + elem.max3.pokemon.name + '</h3>';
                        document.getElementById("thirdMaxPop").href = 'pokemons/' + elem.max3.pokemon.id;
                        var idPath = getFullId(elem.max3.pokemon.id);
                        document.getElementById("thirdMaxPopImg").src = 'static/pokemon-data/images/' + idPath + '.png';
                        document.getElementById("thirdImgLink").href = 'pokemons/' + elem.max3.pokemon.id;
                    }
                }
            }
        }

        fetch("/max3").then(res => res.json()).then(updateMax3); //Get json data of top 3 popular pokemons.
    </script>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>

</html>